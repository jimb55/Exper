#多进程和多线程

进程:由代码，分配给进程的内存和数据组成，系统中一个进程就是一个PID。

进程切换分两步
1.切换**页目录**以使用新的**地址空间**。
2.切换**内核栈**和**硬件上下文**。

线程切换为一部
1.切换**内核栈**和**硬件上下文**。

进程通过 fork() 函数由master创建出work进程。
> 页目录 
> 地址空间 http://blog.csdn.net/wangxiaolong_china

------
> 进程 运行 状态的改变 会使 **用户栈** 和 **内核栈** 的转换，进程至少包含一个线程，线程同时执行要看**cpu 核数**，并行计算，这线程的切换必然导致内核栈的改变
> 上下文 理解成环境吧，就如变量，加载的软件包等等
> 线程的是共享全局参数，函数的，证明切换后使用的**地址空间**相同。只用进程唤醒时才会使用新的地址空间，然后进程里那多条线程使用的同个地址空间

另外一个隐藏的损耗是上下文的切换会扰乱处理器的缓存机制。简单的说，一旦去切换上下文，处理器中所有已经缓存的内存地址一瞬间都作废了。还有一个显著的区别是当你改变虚拟内存空间的时候，处理的页表缓冲（processor’s Translation Lookaside Buffer (TLB)）或者相当的神马东西会被全部刷新，这将导致内存的访问在一段时间内相当的低效。但是在线程的切换中，不会出现这个问题。（来自https://www.cnblogs.com/poluner/articles/6604788.html） 